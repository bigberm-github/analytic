<!DOCTYPE html>
<html>
<head>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<style>
#container {
    min-width: 310px;
    max-width: 600px;
    height: 400px;
    margin: 0 auto;
}
</style>
</head>
<body>
<div id="container"></div>
</body>
<script>
Highcharts.setOptions({
    global: {
        useUTC: false
    }
});
(function() {
   Highcharts.chart('container', {

    title: {
        text: 'Highcharts data from Google Spreadsheets'
    },

    data: {
        googleAPIKey: 'AIzaSyA7gCpr2L3_uWfZDgkO8Kv_bjiUg3xDeKI',
        googleSpreadsheetKey: '1D8ZYtc-uMX4vo_ToeJuE79qn7R1WVVHhuFXDmyLTSxY',
	enablePolling: true,
        dataRefreshRate: 10,
	error: console.error
    }  
  });
	setInterval(function() {
        	var chart = ('container').highcharts();
          (function() {
	      chart.options.data.googleAPIKey = 'AIzaSyA7gCpr2L3_uWfZDgkO8Kv_bjiUg3xDeKI',			  
              chart.options.data.googleSpreadsheetKey = '1D8ZYtc-uMX4vo_ToeJuE79qn7R1WVVHhuFXDmyLTSxY',
              chart.updateFromData();
          });
        }, 5000);
});
Highcharts.Chart.prototype.updateFromData = function()
{
    var chart = this;
    if (chart.options.data.googleSpreadsheetKey)
    {
      Highcharts.data({
          googleSpreadsheetKey: chart.options.data.googleSpreadsheetKey,
          afterComplete: function(dataOptions) {
            Highcharts.each(dataOptions.series, function(series, i) {
              chart.series[i].setData(series.data, false);
            });
            chart.redraw();
          }
        },
        this.options);
    }
};

</script>
</html>
